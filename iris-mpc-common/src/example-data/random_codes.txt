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/zA88MD88M8APAwzADMzDMAADP//zDM8z/8wMzwMwAzzMDw/zMAAzzwM/PM/MAz8/PMP//MMADAPw8wAD8PPw/PzA8DzPPMwwMMzwA8/PD/A//P/PM/8DAM8/wzwwA/w/D8/wA/D8AP8wwMPA8A/AAD/Pz8AzAAPAzDMzzw8/zPP8wzDAP/MP8zzMwzzMPAwA/D/M8MzzPAzzM8P8/MwMzz88DM8M8MDDPD8DwPMzPMDDw8D8AAA/D8PDM/wAPzDw/MzDPMwPP/zP/P/AzzPDPzAPM/8zDMAAM/8MzzzDz88zzzwwwzDPwADPz8P8PwMAMMzw/P/A/w8PAADz8MzMMzAAPM8MA8MMD8/P8M/DAMDMD8DzAwzPAww/DPAwzPPzMw8Dz/AMPMPw/P/M88Dz/zM8MM//w/zzMPDz/AM888zD8Awz8DDzA/z/zM8DzAMwMzDAw8zDP8wzDAw8wDw/PAAAMAA88PMPADw8D8w8DMPPwzzP/zA8Mzw/8D/w8DwwP/AAwADAwP8AwMz8DP8zDzwMz8A8zDMMAD/DDw8Az/wz8z8MwDAAzMzAwMPwMwPDw/8AAzzM8DwMP//AwAA8wPAw///DD8/PPwwMAzD8AwDAw/8wAzzMMPD/D/AMzw8AzDP8/M8wDDMz/PD/Mw/M88/zMDzPDPMAA8/8DPDAAwzAMAPzzMwPDD/w/wzw/PwDw//88/zPMwPAMP/8MPDMA/M/P/8DPA8A8PDADzMPDwMPwPMwAD/wDzPMzMMPM8/AMDMzPAw8w8zM/w88wD8D8/Aw8/8DPMw/MzPz/Pwz/w/M8MMP/P8MwDDzD8DD8/z/DAPP/MAPwA/Pw8zMAz8/wPDwPAMDzDPAAP/AAz8/8/zM/MAP8/A/P8Dzw/MDwzzAP8A/w88DwMzzw/z8/zwwwwDMz8///88PwPwwA==
0.5130759651307597
0.48108602806589384

/// Code to generate the above
import numpy as np
from iris.io.dataclasses import IrisTemplate
from iris.nodes.matcher.hamming_distance_matcher import HammingDistanceMatcher
from iris.utils.base64_encoding import base64_encode_array

def random_template():
  mock_iris_code = np.random.randint(0, 2, (16, 200, 2, 2)).astype(bool)
  mock_mask_code = np.random.randint(0, 2, (16, 200, 2)).astype(bool)
  # last axis is repeated to mimic the img/real bit of the iris code
  # <https://github.com/worldcoin/open-iris/blob/dbc0a52e41297c690c34939882e0d62ccde5ffe5/src/iris/nodes/encoder/iris_encoder.py#L54>
  mock_mask_code = np.stack([mock_mask_code, mock_mask_code], axis=-1)
  return IrisTemplate(iris_codes=[mock_iris_code], mask_codes=[mock_mask_code], iris_code_version="v2.1")

def encode_template(template):
  s = base64_encode_array(template.iris_codes[0]).decode('utf-8')
  s += "\n"
  s += base64_encode_array(template.mask_codes[0]).decode('utf-8')
  return s

t1 = random_template()
t2 = random_template()

print(encode_template(t1) + "\n" + encode_template(t2))
# No rotations
matcher = HammingDistanceMatcher(0)
print(matcher.run(t1, t2))
# 15 rotations both directions
matcher = HammingDistanceMatcher(15)
print(matcher.run(t1, t2))
